<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>主页 · DoubleRFs Documentation</title><meta name="title" content="主页 · DoubleRFs Documentation"/><meta property="og:title" content="主页 · DoubleRFs Documentation"/><meta property="twitter:title" content="主页 · DoubleRFs Documentation"/><meta name="description" content="Documentation for DoubleRFs Documentation."/><meta property="og:description" content="Documentation for DoubleRFs Documentation."/><meta property="twitter:description" content="Documentation for DoubleRFs Documentation."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="DoubleRFs Documentation logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">DoubleRFs Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href="index.html">主页</a><ul class="internal"><li><a class="tocitem" href="#Julia的使用"><span>Julia的使用</span></a></li><li><a class="tocitem" href="#DoubleRF包的使用"><span>DoubleRF包的使用</span></a></li><li><a class="tocitem" href="#文件结构"><span>文件结构</span></a></li></ul></li><li><a class="tocitem" href="examples.html">示例</a></li><li><a class="tocitem" href="docs.html">添加函数与文档编译</a></li><li><a class="tocitem" href="api.html">函数库</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="index.html">主页</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="index.html">主页</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/XuJingye2022/DoubleRFs.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/XuJingye2022/DoubleRFs.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Home"><a class="docs-heading-anchor" href="#Home">Home</a><a id="Home-1"></a><a class="docs-heading-anchor-permalink" href="#Home" title="Permalink"></a></h1><p>这个Julia包是我研究双高频系统过程中，用到的函数库。</p><h2 id="Julia的使用"><a class="docs-heading-anchor" href="#Julia的使用">Julia的使用</a><a id="Julia的使用-1"></a><a class="docs-heading-anchor-permalink" href="#Julia的使用" title="Permalink"></a></h2><h3 id="Julia快速入门"><a class="docs-heading-anchor" href="#Julia快速入门">Julia快速入门</a><a id="Julia快速入门-1"></a><a class="docs-heading-anchor-permalink" href="#Julia快速入门" title="Permalink"></a></h3><p>julia语法的入门可以到下面的网址去挑选你熟悉的语言比较<a href="https://docs.juliacn.com/latest/manual/noteworthy-differences/">它们的显著差异</a>。</p><h3 id="Julia多线程支持"><a class="docs-heading-anchor" href="#Julia多线程支持">Julia多线程支持</a><a id="Julia多线程支持-1"></a><a class="docs-heading-anchor-permalink" href="#Julia多线程支持" title="Permalink"></a></h3><p>安装完Julia之后，在任务管理器中，点击“性能”-“CPU”，在右下角找到“内核”。如下图，内核数为<code>16</code>。 <img src="assets/corenum.png" alt="alt text"/> 然后Windows系统可以搜索“编辑系统环境变量”，在“环境变量”中添加变量，变量名：<code>JULIA_NUM_THREADS</code>，变量值为电脑内核数。 <img src="assets/environmentset.png" alt="alt text"/> 对于Linux工作站，需要自己用代码查看其内核数，然后在<code>.bashrc</code>中使用<code>export JULIA_NUM_THREADS=48</code>添加环境变量。</p><p>有测试表明，如果超过电脑内核数，计算速度反而会降低。因此，即使你电脑线程数更多，此设置也不要超过内核数。</p><h3 id="Julia编辑器的选择"><a class="docs-heading-anchor" href="#Julia编辑器的选择">Julia编辑器的选择</a><a id="Julia编辑器的选择-1"></a><a class="docs-heading-anchor-permalink" href="#Julia编辑器的选择" title="Permalink"></a></h3><p>我推荐几种编辑方式。</p><p>比较小的项目，或者实验性程序，可以用Jupyter Notebook。这样可以边写代码，边记笔记。且VS Code可以远程打开工作站的Jupyter Notebook，非常方便。</p><p>写大型项目，推荐原生VS Code或者国内改版的VS Code——Syslab。</p><p>你如果电脑有VS Code且懒得装新编辑器，需要自己下载Julia编译器，然后安装VS Code <code>Julia</code>插件。并且在右上角“运行”图标右侧选择“Excecute active in REPL”。这会使得你当前打开的代码文件在REPL中运行——意味着函数、变量全部写入了REPL内存中，你可以在REPL内打印变量、导入绘图包观察函数关系。</p><p><img src="assets/run_in_repl.png" alt="alt text"/></p><p>你也可以选择同元软控的<strong>个人版</strong>或<strong>教育版</strong>Syslab。 它基于VS Code的开源代码，扩展了其功能，具有方便的绘图界面。可以像MATLAB那样，通过点击选择变量，然后有多种绘图方式提供选择。而且，由于是用VS Code改的，你可以使用VS Code的各种插件，比如CodeGeeX等等。 注意，Syslab内嵌Julia程序，你无需额外下载。</p><p>如果你有教育邮箱，可以使用<strong>教育版</strong>，功能更全些。他们拿Julia官方开源代码拿来做了优化——比如<code>Plots</code>被他们改成了<code>TyPlots</code>，画的图更像MATLAB了。</p><p>如果你没有教育邮箱，<strong>个人版</strong>Syslab也能用，只是会阉割掉部分同元做优化的库。我不是太喜欢。但是你仍然可以用<code>] add 包名</code>安装Julia官方的库。</p><h2 id="DoubleRF包的使用"><a class="docs-heading-anchor" href="#DoubleRF包的使用">DoubleRF包的使用</a><a id="DoubleRF包的使用-1"></a><a class="docs-heading-anchor-permalink" href="#DoubleRF包的使用" title="Permalink"></a></h2><h3 id="包依赖项的安装"><a class="docs-heading-anchor" href="#包依赖项的安装">包依赖项的安装</a><a id="包依赖项的安装-1"></a><a class="docs-heading-anchor-permalink" href="#包依赖项的安装" title="Permalink"></a></h3><p>一般注册过的包安装时，都可以用<code>] add DoubleRFs</code>来安装。同时依赖的包，比如<code>FFTW</code>,<code>Interpolations</code>,<code>IntervalArithmetic</code>等都会自动安装到本地来。</p><p>然而我这种本地的包，暂时不知道怎么弄。首次在本机运行的话，暂时就通过手动添加的方式安装依赖项吧。以后要是想维护、拓展本包，这都是必要的。</p><p>在julia REPL中，按下<code>]</code>进入包管理模式。然后输入：</p><pre><code class="nohighlight hljs">add FFTW                    # 傅里叶变换相关
add Interpolations          # 插值相关
add IntervalArithmetic      # 区间算术
add IntervalRootFinding     # 基于区间算术的找根包，即使怀疑有根，也会告诉你
add QuadGK                  # 函数积分包
add LoopVectorization       # 向量化相关，增加计算速度
add CurveFit                # 曲线拟合包</code></pre><h3 id="本地包的导入"><a class="docs-heading-anchor" href="#本地包的导入">本地包的导入</a><a id="本地包的导入-1"></a><a class="docs-heading-anchor-permalink" href="#本地包的导入" title="Permalink"></a></h3><p>使用时需要先将DoubleRFs包的路径——或者<code>DoubleRFs</code>的父级目录——添加到julia的搜索路径中。</p><pre><code class="language-julia hljs">push!(LOAD_PATH, &quot;E:/Documents/JuliaProgram/MyModules/&quot;)</code></pre><p>这样就成功地将本地包路径添加到了julia搜索路径。这样可以在代码中<code>import</code>或者<code>using</code>调用包名。</p><p>如果你存在多个设备，比如“办公室电脑”、“个人PC”、“Linux工作站”，那么可以用下面的方式添加目录：</p><pre><code class="language-julia hljs">try
    global computername = ENV[&quot;COMPUTERNAME&quot;] # 获取Windows电脑名称
catch
    global computername = ENV[&quot;HOSTNAME&quot;] # 获取Linux工作站名称
end
if computername == &quot;办公室电脑&quot; # 如果电脑名称为&quot;办公室电脑&quot;
    push!(LOAD_PATH, &quot;E:/Documents/JuliaProgram/MyModules/&quot;)
elseif computername==&quot;localhost.localdomain&quot;    # 如果工作站名称为&quot;localhost.localdomain&quot;
    push!(LOAD_PATH, &quot;/home/xujingye/Julia/MyModules&quot;)
end</code></pre><p>你可以添加为VSCode或者Syslab的代码片段，下次能便捷输入。</p><h3 id="调用相关函数"><a class="docs-heading-anchor" href="#调用相关函数">调用相关函数</a><a id="调用相关函数-1"></a><a class="docs-heading-anchor-permalink" href="#调用相关函数" title="Permalink"></a></h3><p>调用的方式有两种：<code>using</code>和<code>import</code>。</p><p>(1)如果你使用：</p><pre><code class="language-julia hljs">using DoubleRFs</code></pre><p>来使用这个包了，那么所有在<code>src/DoubleRFs.jl</code>中通过<code>export</code>导出的函数，都可以直接调用；没有<code>export</code>的，也可以用<code>DoubleRFs.函数名()</code>调用。</p><p>(2)如果你使用：</p><pre><code class="language-julia hljs">import DoubleRFs:one_turn_map</code></pre><p>那么只能调用<code>one_turn_map</code>这个函数。</p><p>(3)或者你用：</p><pre><code class="language-julia hljs">import DoubleRFs</code></pre><p>这样你可以用<code>DoubleRFs.one_turn_map</code>来调用函数。</p><p><code>import</code>的好处是，只导入使用的函数，不怕命名冲突；而<code>using</code>会导入全部<code>export</code>的函数，可能会产生冲突。</p><p>导入包或函数之后，具体的使用案例，参见“示例”一节：</p><ul><li><a href="examples.html#双高频纵向密度分布">双高频纵向密度分布</a></li><li><a href="examples.html#计算束长">计算束长</a></li><li><a href="examples.html#双高频系统纵向工作点分布">双高频系统纵向工作点分布</a></li><li><a href="examples.html#双高频系统不稳定性分析">双高频系统不稳定性分析</a></li><li class="no-marker"><ul><li><a href="examples.html#纯双高频系统">纯双高频系统</a></li><li><a href="examples.html#双高频系统势阱畸变">双高频系统+势阱畸变</a></li></ul></li></ul><h2 id="文件结构"><a class="docs-heading-anchor" href="#文件结构">文件结构</a><a id="文件结构-1"></a><a class="docs-heading-anchor-permalink" href="#文件结构" title="Permalink"></a></h2><p>如果你想扩展自己的双高频函数包，你需要了解这里的文件结构。</p><p>所有的函数都放在<code>/src/</code>文件夹中。其中<code>DoubleRFs.jl</code>与包名同名，这个文件很重要：向外提供了对接接口；向内管理着所有的函数。</p><pre><code class="language-text hljs">DoubleRFs
├── README.md
├── Manifest.toml
├── Project.toml
├── src                             # 源代码
│   ├── SimulationTools
│   │   ├── ST_MappingEquation.jl   # 单圈映射方程，用来进行粒子多圈迭代
│   │   │                           # 也可以保留历史坐标记录分析纵向振荡频率
│   │   └── ST_SynchroTuneSpread.jl # 分析纵向振荡频率分布
│   ├── GeneralTools
│   │   ├── GT_CurveFit.jl
│   │   ├── GT_Int.jl
│   │   ├── GT_MatrixDerivative.jl
│   │   ├── GT_Pad.jl
│   │   ├── GT_Random.jl
│   │   ├── GT_RemoveDataList.jl    # 早期测试阶段，我计算出来的角变量
│   │   │                           # 由于精度问题，在某些位置总是波动很大
│   │   │                           # 甚至超出(0, 2pi)范围，因此我利用
│   │   │                           # 这个，移除过近的点、超出范围的点
│   │   │                           # 不过后来不怎么用了，我们的库里实际没用过
│   │   ├── GT_Sample.jl            # 分为两个部分：1. 根据密度分布函数进行
│   │   │                           # 采样，这样一大群粒子在此坐标上的分布就
│   │   │                           # 满足此函数；2. 径向密度分布的积分接近1.
│   │   │                           # 我琢磨着除了目前的采样方式，是否存在适应
│   │   │                           # 性采样能够让计算更少。于是参考了自适应
│   │   │                           # Simpson法——对于梯形积分规则，斜率均匀
│   │   │                           # 的地方采样少，斜率变化大的地方采样密集。
│   │   │                           # 但是，密度分布斜率均匀就代表纵向工作点
│   │   │                           # 分布斜率均匀吗？未必。所以实际上弃用。
│   │   ├── GT_Sum.jl               # 偶然发现的精确求和法，电脑用二进制计算
│   │   │                           # 却要显示为十进制，所以有时会将比如2显示
│   │   │                           # 为1.9999999...。此求和法一定程度上能
│   │   │                           # 解决这个问题。不过我怕影响性能，没用。
│   │   └── GT_ZeroPoint.jl
│   ├── DataAnalysis
│   │   ├── DA_GrowthRate.jl
│   │   └── DA_RMS.jl
│   ├── ActionAngleVlasovSolver
│   │   ├── Sample
│   │   │   ├── AngleVariable.jl
│   │   │   ├── AngularSampling.jl
│   │   │   └── δJθ.jl.jl
│   │   ├── TMCI_Main.jl
│   │   ├── NumericalSpecialFunction.jl
│   │   └── TMCI_InteractionMatrix.jl
│   ├── DoubleRFs.jl
│   ├── FixedPoints.jl              # 求不动点的相关工具
│   ├── NormedDensity.jl
│   ├── Voltage.jl
│   ├── Potential.jl
│   └── Hamiltonian.jl
├── docs # 文档
└── test</code></pre><p>文件结构符号可以在<a href="https://blog.csdn.net/huangzhiyuan_/article/details/132752382">这里打开</a>。</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="examples.html">示例 »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 10 September 2024 21:18">Tuesday 10 September 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
